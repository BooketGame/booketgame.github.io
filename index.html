<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clever | Portal</title>

  <!-- Google reCAPTCHA v2 -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <link rel="icon" type="image/png" href="logo.png">

  <style>
    /* === Core layout / theme === */
    * { box-sizing: border-box; }
    html,body { height:100%; }
    body {
      margin:0;
      font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(135deg,#0f0b20,#2e0f5a); /* Purple Night default */
      color: #fff;
      display:flex;
      flex-direction:column;
      align-items:center;
      padding-top:60px;
      min-height:100vh;
      overflow:auto;
      transition: background .35s ease;
    }

    /* header / title */
    #titleWrapper {
      text-align:center;
      cursor:pointer;
      user-select:none;
      margin-bottom:18px;
      outline: none;
    }
    #mainTitle {
      font-size:2.2rem;
      letter-spacing:1px;
      margin:0;
      max-width:1000px;
      padding:0 16px;
      transition: color .18s ease, transform .18s ease;
    }
    #mainTitle:hover { color: #bfaaff; transform: scale(1.01); }
    #titleQuote {
      font-size:0.85rem;
      color:#ddd;
      margin-top:6px;
      min-height:1.1em;
      opacity:1;
      transition: opacity .22s ease, transform .22s ease;
    }

    /* search box */
    .search-box {
      display:flex;
      align-items:center;
      background:#222;
      border-radius:50px;
      padding:6px 10px;
      width:90%;
      max-width:560px;
      box-shadow: 0 8px 18px rgba(0,0,0,0.45);
    }
    .search-box input {
      flex:1;
      padding:14px 18px;
      border:none;
      outline:none;
      background:transparent;
      color:#fff;
      font-size:1rem;
      border-radius: 40px;
    }
    .search-box button {
      margin-left:10px;
      background:#6c63ff;
      border:none;
      color:white;
      padding:10px 18px;
      border-radius:28px;
      cursor:pointer;
      box-shadow: 0 6px 0 rgba(0,0,0,0.35);
      font-weight:600;
      transition: background .15s ease, transform .12s ease;
    }
    .search-box button:hover { background:#574ede; transform: translateY(-1px); }

    /* player card */
    #player-section {
      margin-top:18px;
      width:90%;
      max-width:560px;
      background:#1c1c2a;
      border-radius:14px;
      padding:18px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.45);
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:10px;
    }
    #nowPlaying { display:none; color:#ddd; text-align:center; }
    #pauseBtn { display:none; background:#6c63ff; border:none; color:white; padding:8px 14px; border-radius:20px; cursor:pointer; }
    #seekBar { display:none; width:100%; height:6px; appearance:none; background:#333; border-radius:8px; outline:none; }
    #seekBar::-webkit-slider-thumb { appearance:none; width:12px; height:12px; background:#6c63ff; border-radius:50%; }

    #timeDisplay { display:none; width:100%; font-size:.9rem; color:#bbb; justify-content:space-between; }

    /* results */
    .results {
      margin-top:28px;
      display:flex;
      flex-direction:column;
      width:90%;
      max-width:700px;
      gap:12px;
    }
    .result-item {
      background:#1f1f2f;
      border-radius:12px;
      padding:10px;
      display:flex;
      gap:12px;
      align-items:center;
      cursor:pointer;
      transition: background .14s ease, transform .12s ease;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    }
    .result-item:hover { background:#2a2a3f; transform: translateY(-2px); }
    .result-item img { width:56px; height:56px; border-radius:10px; object-fit:cover; }
    .info { display:flex; flex-direction:column; gap:6px; }
    .info strong { font-size:1rem; color:#fff; }
    .info span { color:#aaa; font-size:.9rem; }

    /* disclaimer */
    .disclaimer { position:fixed; right:16px; bottom:8px; color:#777; font-size:.76rem; text-align:right; }

    /* lock overlay (reCAPTCHA) */
    #locked {
      position:fixed; inset:0;
      display:flex; align-items:center; justify-content:center;
      background: linear-gradient(180deg, rgba(6,6,8,0.85), rgba(6,6,8,0.9));
      z-index:9999;
      transition: opacity 400ms ease, visibility 400ms;
    }
    #locked.hidden { opacity:0; pointer-events:none; visibility:hidden; }
    .lock-box {
      width:360px;
      background: linear-gradient(180deg,#111220,#0b0b10);
      border-radius:14px;
      padding:22px;
      text-align:center;
      box-shadow: 0 18px 40px rgba(0,0,0,0.6);
    }
    .lock-box h2 { margin:0 0 12px 0; color:#cfcfe6; font-size:1.1rem; }
    .grecaptcha-wrap { display:flex; justify-content:center; margin-top:6px; }

    /* Admin button + panel */
    #adminBtn {
      position:fixed;
      top:14px;
      right:16px;
      z-index:10001;
      background:transparent;
      border:2px solid rgba(255,255,255,0.08);
      color:#ddd;
      padding:8px 12px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
    }
    #adminPanel {
      position:fixed;
      top:56px;
      right:16px;
      width:360px;
      max-width:92%;
      background:linear-gradient(180deg, rgba(20,20,28,0.98), rgba(10,10,16,0.98));
      border-radius:12px;
      padding:12px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.6);
      transform-origin: top right;
      transform: translateY(-8px) scale(.98);
      opacity:0;
      pointer-events:none;
      transition: opacity .22s ease, transform .22s ease;
      z-index:10000;
    }
    #adminPanel.open { opacity:1; transform: translateY(0) scale(1); pointer-events:auto; }

    .admin-row { display:flex; align-items:center; justify-content:space-between; gap:8px; padding:8px 6px; border-bottom:1px dashed rgba(255,255,255,0.03); }
    .admin-row label { font-size:0.92rem; color:#ddd; }
    .admin-actions { padding-top:8px; display:flex; gap:8px; flex-wrap:wrap; }
    .btn { background:#6c63ff; border:none; color:white; padding:8px 10px; border-radius:8px; cursor:pointer; font-weight:600; }
    .btn.ghost { background:transparent; border:1px solid rgba(255,255,255,0.06); color:#ddd; }

    /* preset buttons: white text + subtle glow for readability on gradients */
    .preset {
      color: #fff;
      text-shadow: 0 1px 0 rgba(0,0,0,0.6);
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.08);
      padding:6px 8px;
      border-radius:8px;
      cursor:pointer;
      font-size:.9rem;
      transition: transform .12s ease, background .12s ease;
    }
    .preset:hover { transform: translateY(-2px); background: rgba(255,255,255,0.08); }
    .preset.active { box-shadow: 0 6px 18px rgba(0,0,0,0.45); background: rgba(255,255,255,0.09); }

    /* activity log styles (floating panel inside admin) */
    #activityLog {
      margin-top:10px;
      background: rgba(0,0,0,0.12);
      border-radius:10px;
      padding:8px;
      width:100%;
      max-height:220px;
      overflow:auto;
      border:1px solid rgba(255,255,255,0.04);
    }
    #activityLogHeader {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      margin-bottom:6px;
    }
    #activityList {
      list-style:none;
      margin:0;
      padding:0;
      display:flex;
      flex-direction:column;
      gap:6px;
      font-size:.84rem;
      color:#e6e6ee;
    }
    .log-item {
      background: rgba(255,255,255,0.02);
      padding:8px;
      border-radius:8px;
      box-shadow: 0 6px 12px rgba(0,0,0,0.35);
      display:flex;
      justify-content:space-between;
      gap:8px;
      align-items:flex-start;
      word-break:break-word;
    }
    .log-ts { color:#bababf; font-size:.75rem; margin-left:8px; white-space:nowrap; }

    .log-controls { display:flex; gap:6px; margin-top:8px; }
    .small { font-size:0.82rem; color:#bdbbd0; }

    /* responsive */
    @media (max-width:520px) {
      #mainTitle { font-size:1.4rem; padding:0 12px; }
      .search-box input { padding:12px; }
      .lock-box { width:92%; padding:16px; }
      #adminPanel { right:8px; left:8px; width:auto; top:64px; }
      #adminBtn { right:8px; }
    }
  </style>
</head>
<body>
  <!-- LOCK overlay with real reCAPTCHA (v2 checkbox) -->
  <div id="locked" role="dialog" aria-modal="true">
    <div class="lock-box" role="document" aria-label="Verification required">
      <h2>Verify you're human to continue 🎧</h2>
      <div class="grecaptcha-wrap">
        <!-- REAL site key provided earlier -->
        <div id="grecaptcha-root" class="g-recaptcha" data-sitekey="6Lfs5u4rAAAAABKDdVRJk17X2uMk7l2mzi6frduJ" data-callback="unlockSite"></div>
      </div>
    </div>
  </div>

  <!-- Admin -->
  <button id="adminBtn" aria-haspopup="true" aria-controls="adminPanel">Admin Login</button>

  <div id="adminPanel" role="region" aria-label="Admin Panel">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;">
      <strong style="color:#fff">Admin Panel</strong>
      <button id="adminLogout" class="btn ghost" title="Close panel">Close</button>
    </div>

    <div class="admin-row">
      <label>reCAPTCHA</label>
      <div class="toggle">
        <button id="recapToggle" class="btn">Disable</button>
      </div>
    </div>

    <div class="admin-row">
      <label>Random Quotes</label>
      <div class="toggle">
        <button id="quotesToggle" class="btn">Disable</button>
      </div>
    </div>

    <div class="admin-row" style="flex-direction:column; align-items:flex-start;">
      <label style="width:100%;">Background Gradient Presets <span class="small">(admin only)</span></label>
      <div class="admin-actions" style="width:100%;">
        <button class="preset" data-preset="purpleNight">Purple Night</button>
        <button class="preset" data-preset="blueFade">Ocean Blue</button>
        <button class="preset" data-preset="sunset">Sunset Vibes</button>
        <button class="preset" data-preset="matrix">Neon Matrix</button>
        <button class="preset" data-preset="galaxy">Galaxy</button>
      </div>
    </div>

    <!-- Activity Log -->
    <div id="activityLog" aria-live="polite" role="status">
      <div id="activityLogHeader">
        <strong style="color:#fff;font-size:.95rem;">Activity Log</strong>
        <div style="display:flex;gap:6px;align-items:center;">
          <button id="exportLogBtn" class="btn ghost" title="Export log">Export</button>
          <button id="clearLogBtn" class="btn ghost" title="Clear log">Clear</button>
        </div>
      </div>
      <ul id="activityList" aria-label="Admin activity list"></ul>
    </div>

    <div style="margin-top:8px;font-size:.82rem;color:#bfbfd3">
      <div><strong>Password:</strong> client-only admin password is <code style="background:#111;padding:2px 6px;border-radius:4px;color:#9b9bff">DSD2562025</code></div>
      <div class="small" style="margin-top:6px;">All settings persist locally (localStorage). Visitors cannot change these UI options.</div>
    </div>
  </div>

  <!-- MAIN UI -->
  <div id="titleWrapper" tabindex="0">
    <h1 id="mainTitle">DSD256 Music Player — Music Search</h1>
    <div id="titleQuote"></div>
  </div>

  <div class="search-box" role="search" aria-label="Search for music">
    <input id="query" type="text" placeholder="Search for a song..." aria-label="Search input" />
    <button id="search">Search</button>
  </div>

  <div id="player-section" aria-live="polite">
    <div id="nowPlaying"></div>
    <button id="pauseBtn">⏸ Pause</button>
    <input type="range" id="seekBar" value="0" min="0" max="100" />
    <div id="timeDisplay"><span id="currentTime">0:00</span><span id="totalTime">0:00</span></div>
  </div>

  <div id="results" class="results" aria-label="Search results"></div>

  <div class="disclaimer">© 2025 DSD Portal</div>

  <script>
    // === reCAPTCHA unlock callback ===
    function unlockSite() {
      document.getElementById('locked').classList.add('hidden');
    }

    // === Admin functionality ===
    const ADMIN_PW = "DSD2562025";
    const adminBtn = document.getElementById("adminBtn");
    const adminPanel = document.getElementById("adminPanel");
    const adminLogout = document.getElementById("adminLogout");

    const activityList = document.getElementById("activityList");
    function addLog(text) {
      const ts = new Date().toLocaleTimeString();
      const li = document.createElement("li");
      li.className = "log-item";
      li.innerHTML = `<span>${text}</span><span class="log-ts">${ts}</span>`;
      activityList.prepend(li);
    }

    function openAdminPanel() {
      adminPanel.classList.add("open");
      adminBtn.style.opacity = "0.6";
      addLog('✔️ Admin logged in');
    }
    function closeAdminPanel() {
      adminPanel.classList.remove("open");
      adminBtn.style.opacity = "1";
      addLog('✖️ Admin logged out');
    }

    function toggleAdminPanel() {
      if (adminPanel.classList.contains("open")) {
        closeAdminPanel();
        return;
      }
      const pw = prompt("Admin Password:");
      if (pw === null) return;
      if (pw === ADMIN_PW) {
        openAdminPanel();
      } else {
        alert("Access Denied");
        addLog('🔒 Failed admin login attempt');
      }
    }

    adminBtn.addEventListener("click", toggleAdminPanel);
    adminBtn.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        toggleAdminPanel();
      }
    });

    document.addEventListener("mousedown", (e) => {
      if (!adminPanel.classList.contains("open")) return;
      if (!adminPanel.contains(e.target) && !adminBtn.contains(e.target)) closeAdminPanel();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && adminPanel.classList.contains("open")) closeAdminPanel();
    });

    adminLogout.addEventListener("click", closeAdminPanel);

    // Preset buttons
    const presets = {
      purpleNight: "linear-gradient(135deg,#0f0b20,#2e0f5a)",
      blueFade: "linear-gradient(135deg,#0f4c81,#00c6ff)",
      sunset: "linear-gradient(135deg,#ff4b1f,#ff9068)",
      matrix: "linear-gradient(135deg,#0f0,#020)",
      galaxy: "linear-gradient(135deg,#1a2a6c,#b21f1f,#fdbb2d)"
    };
    document.querySelectorAll('.preset').forEach(btn => {
      btn.addEventListener('click', () => {
        document.body.style.background = presets[btn.dataset.preset];
        addLog(`🎨 Background set to ${btn.dataset.preset}`);
        document.querySelectorAll('.preset').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    // Activity log buttons
    document.getElementById("clearLogBtn").addEventListener("click", () => {
      activityList.innerHTML = '';
      addLog('🧹 Activity log cleared');
    });
    document.getElementById("exportLogBtn").addEventListener("click", () => {
      let text = Array.from(activityList.children).map(li=>li.textContent).join("\n");
      const blob = new Blob([text], {type:'text/plain'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'activity-log.txt';
      a.click();
      addLog('📤 Activity log exported');
    });

    // Quotes randomization
    const quotes = [
      "🎵 Music expresses that which cannot be put into words.",
      "🎶 Where words fail, music speaks.",
      "🎧 Life is a song, love is the music."
    ];
    const titleQuote = document.getElementById("titleQuote");
    function randomQuote() {
      titleQuote.textContent = quotes[Math.floor(Math.random()*quotes.length)];
    }
    setInterval(randomQuote, 8000);
    randomQuote();
  </script>
</body>
</html>
